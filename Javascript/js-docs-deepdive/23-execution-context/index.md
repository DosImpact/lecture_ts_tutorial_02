## ▣ 23장: 실행 컨텍스트

실행 컨텍스트란 실행 코드에 제공할 정보들을 모아 놓은 객체입니다.

## 23.1 소스코드의 타입

전역코드, 함수코드, eval코드, 모듈코드 4가지

## 23.2 소스코드의 평가와 실행

소스코드를 선언문을 먼저 평가하여 실행컨텍스트(key-value)객체를 만든다.  
그외 소스코드를 평가하여 필요한 정보를 실행컨텍스트를 참조

## 23.3 실행 컨텍스트의 역할

1. 전역코드 평가

- 전역 변수, 전역함수가 전역 스코프에 등록

2. 전역 코드 실행

- 함수를 만나면 전역코드 일시중단

3. 함수 코드 평가

- 함수 코드 실행전, 지역 스코프에 등록, arguments, this바인딩 등

4. 함수 코드 실행

- 스코프 체인을 통해 상위 스코프로 이동하는 등 작업을 거쳐 console.log 실행

### 실행 컨텍스트란 ?

- **소스코드를 실행하는데 필요한 환경을 제공, 코드의 실행결과를 관리**

- 식별자와 스코프는 실행컨텍스트의 렉시컬 환경으로 관리
- 코드실행순서는 실행컨텍스트 스택으로 관리

### 실행 컨텍스트 주요 기능

- 식별자(변수,함수,클래스)를 스코프를 구분하여 등록 및 상태변화를 추적
- 스코프 중첩관계에 따라 스코프 체인 형성, 상위 스코프이동하여 검색 가능해야 함
- 실행중인 코드 순서 변경시 다시 돌아올수도 있어야 한다.

## 23.4 실행 컨텍스트 스택

함수가 호출되면 실행컨텍스트 스택에 쌓인다.  
최상위 스택의 실행컨텍스트가 현재 실행중인 것이다.

## 23.5 렉시컬 환경

실행 컨텍스트의 컴포넌트로 자료구조이다.

- 식별자와 식별자에 바인딩된 값
- 상위 스코프에 대한 참조를 기록해야 한다.

실행 컨텍스트는 LexicalEnvironment + VariableEnvironment로 구성

- 처음에는 ExcutionContext에 동일한 LexicalEnvironment를 가르키는
  LexicalEnvironment,VariableEnvironment 존재

- 코드를 실행하면서 환경이 변경된다.

LexicalEnvironment는 EnvironmentRecord + OuterLexicalEnvironmentReference로 구성

- 환경레코드 : 스코프에 포함된 식별자 등록, 바인딩값 관리
- 외부렉시컬환경참조 : 상위 스코프 가르킨다. 해당 실행컨텍스트를 만든 상위스코프와 단방향 링크드리스트인 스코프 체인 구현

## ⚠🚀 23.6 실행 컨텍스트의 생성과 식별자 검색 과정

```
전역 객체 생성 - 전역 코드 평가 - 전역 코드 실행

    foo 함수 코드 평가 - foo 함수 코드 실행

        bar 함수 코드 평가 - bar 함수 코드 실행 - bar 함수 코드 실행 종료

    foo 함수 코드 실행 종료

전역 코드 실행 종료
```

## ⚠🚀 23.7 실행 컨텍스트와 블록 레벨 스코프
